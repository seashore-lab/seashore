# 持久化中间件

在生产环境中，您通常希望将持久化作为一个横切关注点：

- 记录用户消息
- 记录助手输出
- 记录工具调用/结果
- 记录跟踪/指标

Seashore 的存储层提供存储库；您可以将它们组合到应用程序服务器或工作流运行器的中间件中。

典型方法：

1. 为每个对话创建一个 `threadId`。
2. 持久化每个入站/出站消息。
3. 持久化工具调用和工具结果。
4. 使用跟踪进行可观察性（参见生产 → 可观察性）。
